---
import { getCollection } from 'astro:content'
import type { InferGetStaticParamsType, InferGetStaticPropsType, GetStaticPaths } from 'astro'

import Layout from '../layouts/Layout.astro'

export const getStaticPaths = (async () => {
    const posts = await getCollection('posts')
    return posts.map((post) => {
        return {
            params: { slug: post.slug },
            props: { post }
        }
    })
}) satisfies GetStaticPaths

type Params = InferGetStaticParamsType<typeof getStaticPaths>
type Props = InferGetStaticPropsType<typeof getStaticPaths>

const { slug } = Astro.params as Params
const { post } = Astro.props

const { Content } = await post.render()
---

<Layout title={post.data.title}>
    <div id="post" class="container mx-auto max-w-6xl space-y-32">
        <div id="aboutme" class="container mx-auto">
            <div class="mx-4 my-8 text-slate-900">
                <h1 class="font-sans text-4xl font-semibold antialiased">
                    {post.data.title}
                </h1>
                <div class="prose prose-lg prose-slate mt-3">
                    <Content />
                </div>
            </div>
        </div>
    </div>
</Layout>

<style is:global>
    #post .prose a {
        @apply font-sans font-semibold no-underline antialiased hover:underline;
    }
</style>
