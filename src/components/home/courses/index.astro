---
import { getCollection } from 'astro:content'
import { type CollectionEntry } from 'astro:content'

import { Award, BookOpenText } from 'lucide-astro'
import { format } from 'date-fns'

import Event from '../event/index.astro'

const events = (
    await getCollection('events', ({ data }) => {
        return data.type === 'training'
    })
).sort(function (a: CollectionEntry<'events'>, b: CollectionEntry<'events'>) {
    return b.data.date.getTime() - a.data.date.getTime()
})
---

<div class="mx-4 my-8">
    <div class="my-8 flex space-x-4">
        <div class="grid h-8 w-8 flex-none justify-center">
            <BookOpenText class="h-8 w-8" />
        </div>
        <div class="m-h-8 grow">
            <h3 class="font-sans text-xl font-semibold antialiased">Training</h3>
        </div>
    </div>
    {
        events.map((event) => (
            <Event title={event.data.title} uri={event.data.uri}>
                <Award slot="icon" />
                <p slot="description">{event.data.date && format(event.data.date, 'MMM yyyy')}</p>
            </Event>
        ))
    }
</div>
